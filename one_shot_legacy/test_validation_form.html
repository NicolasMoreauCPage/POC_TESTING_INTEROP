<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test Validation Form</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        form { max-width: 800px; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        textarea, select { width: 100%; padding: 8px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #2563eb; color: white; border: none; cursor: pointer; }
        button:hover { background: #1d4ed8; }
        .debug { background: #fef3c7; padding: 15px; margin: 20px 0; border: 1px solid #fbbf24; }
    </style>
</head>
<body>
    <h1>Test Validation Form</h1>
    
    <div class="debug">
        <strong>Test Instructions:</strong>
        <ol>
            <li>Click "Submit" to test with pre-filled message</li>
            <li>Check the browser console for any errors</li>
            <li>You should be redirected and see validation results</li>
        </ol>
    </div>

    <form method="post" action="http://127.0.0.1:8000/validation/validate" id="testForm">
        <label for="hl7_message">HL7 Message:</label>
        <textarea id="hl7_message" name="hl7_message" rows="8" required>MSH|^~\&|SENDING|SEND_FAC|RECEIVING|RECV_FAC|20251105120000||ADT^A01^ADT_A01|MSG001|P|2.5
EVN|A01|20251105120000
PID|1||123456^^^HOSP||DUPONT^JEAN||19800101|M
PV1|1|I|CARDIO^101^1|||||||||||||||||1</textarea>

        <label for="direction">Direction:</label>
        <select id="direction" name="direction">
            <option value="inbound" selected>Inbound (réception)</option>
            <option value="outbound">Outbound (émission)</option>
        </select>

        <label for="profile">Profile:</label>
        <select id="profile" name="profile">
            <option value="IHE_PAM_FR" selected>IHE PAM France</option>
            <option value="IHE_PAM">IHE PAM International</option>
        </select>

        <button type="submit">Submit Test</button>
    </form>

    <script>
        document.getElementById('testForm').addEventListener('submit', function(e) {
            console.log('Form is being submitted...');
            console.log('Message length:', document.getElementById('hl7_message').value.length);
            console.log('Direction:', document.getElementById('direction').value);
            console.log('Profile:', document.getElementById('profile').value);
        });
    </script>
</body>
</html>
